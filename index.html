<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Game Efficiency Explorer — CSC316 A4</title>
  <!-- D3 v7 -->
  <style>
    :root {
      --bg: #0f1115;
      --panel: #171a21;
      --ink: #e7edf3;
      --muted: #98a2b3;
      --accent: #6ee7ff;
      --accent2: #a78bfa;
      --good: #22c55e;
      --bad: #ef4444;
      --grid: #222630;
    }
    html, body { height: 100%; }
    body {
      margin: 0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
      background: var(--bg); color: var(--ink);
      display: grid; place-items: start center; padding: 24px;
    }
    .app { max-width: 1100px; width: 100%; display: grid; gap: 16px; }
    header { display:flex; align-items:baseline; justify-content:space-between; gap: 8px; }
    h1 { font-size: 20px; margin: 0; letter-spacing: 0.3px; }
    .sub { color: var(--muted); font-size: 13px; }

    .row { display: grid; grid-template-columns: 1fr; gap: 16px; }
    @media (min-width: 900px) { .row { grid-template-columns: 2fr 1fr; } }

    .panel { background: var(--panel); border: 1px solid #1f2430; border-radius: 14px; padding: 14px 16px; }

    .controls { display:flex; flex-wrap:wrap; gap: 10px; align-items:center; }
    .controls label { font-size: 12px; color: var(--muted); }
    .controls select, .controls input {
      background:#0e1218; color:var(--ink); border:1px solid #262b36; border-radius:10px; padding:8px 10px; font-size:13px;
    }

    .kpis { display:grid; grid-template-columns: repeat(4, minmax(0,1fr)); gap:10px; }
    .kpi { background:#0e1218; border:1px solid #262b36; border-radius:12px; padding:10px; }
    .kpi h3 { margin: 0 0 6px; font-size:11px; color:var(--muted); font-weight:600; text-transform:uppercase; letter-spacing:0.5px; }
    .kpi .val { font-size:22px; font-weight:700; }

    .chart-wrap { position: relative; }
    .legend { display:flex; gap:10px; align-items:center; font-size:12px; color:var(--muted); }
    .legend .sw { width:10px; height:10px; border-radius:3px; display:inline-block; }

    .tooltip { position: fixed; pointer-events:none; background:#0e1218; color:var(--ink); font-size:12px; padding:8px 10px; border:1px solid #262b36; border-radius:10px; opacity:0; transition: opacity 0.12s ease-out; white-space:nowrap; }

    .footer { color: var(--muted); font-size: 12px; text-align:right; }
    a { color: var(--accent); text-decoration: none; }
    a:hover { text-decoration: underline; }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/d3@7" defer></script>
  <script src="js/script.js" defer></script>
</head>
<body>
  <div class="app">
    <header>
      <div>
        <h1>Game Efficiency Explorer</h1>
        <div class="sub">Interactive, multi-view summary of makes, misses, attempts & FG% over time (single vs team games).</div>
      </div>
      <div class="controls panel">
        <label for="typeSel">Game site</label>
        <select id="typeSel">
          <option value="all">All</option>
          <option value="single">Single</option>
          <option value="team">Team</option>
        </select>
        <label for="opponentSel">Opponent</label>
        <select id="opponentSel">
          <option value="all">All</option>
        </select>
        <label>
          Smoothing
          <input id="smoothChk" type="checkbox" />
        </label>
      </div>
    </header>

    <section class="kpis">
      <div class="kpi"><h3>FG%</h3><div class="val" id="k_fg">–</div></div>
      <div class="kpi"><h3>Attempts</h3><div class="val" id="k_att">–</div></div>
      <div class="kpi"><h3>Makes</h3><div class="val" id="k_mk">–</div></div>
      <div class="kpi"><h3>Misses</h3><div class="val" id="k_ms">–</div></div>
    </section>

    <section class="row">
      <div class="panel chart-wrap">
        <div class="legend" style="margin-bottom:8px">
          <span class="sw" style="background:var(--accent)"></span> FG% per game
          <span class="sw" style="background:var(--accent2)"></span> Smoothed (toggle)
        </div>
        <svg id="timeline" width="100%" height="260" viewBox="0 0 900 260"></svg>
      </div>
      <div class="panel chart-wrap" style="display:grid; grid-template-columns:1fr 1fr; gap:8px; align-items:center">
        <svg id="donut" width="260" height="260" viewBox="0 0 260 260"></svg>
        <div>
          <h3 style="margin:0 0 8px; color:var(--muted); font-size:12px; text-transform:uppercase; letter-spacing:.5px">Selected Range Summary</h3>
          <ul id="summary" style="list-style:none; padding:0; margin:0; font-size:14px; line-height:1.6">
            <li>Games: –</li>
            <li>FG%: –</li>
            <li>Attempts: –</li>
            <li>Avg Pace (min/game): –</li>
          </ul>
          <p class="sub" style="margin-top:10px">Brush on the timeline to restrict the range. Hover points for details.</p>
        </div>
      </div>
    </section>

    <section class="panel">
      <div class="legend" style="margin-bottom:8px">
        <span class="sw" style="background:var(--good)"></span> Makes
        <span class="sw" style="background:var(--bad)"></span> Misses
      </div>
      <svg id="bars" width="100%" height="220" viewBox="0 0 900 220"></svg>
    </section>

    <div class="footer">
      Data: sample CSV embedded. Replace with your own <code>games.csv</code> or public API (client-side only).
      • Built with D3 v7 • CSC316 A4
    </div>
  </div>

  <div class="tooltip" id="tt"></div>

</body>
</html>

